---
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";

interface Props {
  imagePath: string;
  altText: string;
  name: string;
  width: string;
  length: string;
  price: string;
  extra?: string;
  images: Array<string>;
}

const {
  imagePath,
  altText,
  name,
  width,
  length,
  price,
  extra,
  images = [],
} = Astro.props;
const allImages = import.meta.glob<{ default: ImageMetadata }>(
  "/src/images/springkastelen/*.{jpeg,jpg,png,gif,webp}"
);

console.log(images);

if (!allImages[imagePath])
  throw new Error(
    `"${imagePath}" does not exist in glob: "src/images/*.{jpeg,jpg,png,gif,webp}"`
  );

const gallery = `gallery-${name}`;
---

<div>
  <a data-fslightbox={gallery} href={imagePath}>
    <Image
      src={allImages[imagePath]()}
      alt={altText}
      class="rounded-lg mb-4"
    /></a
  >
  {
    images.map((path) => {
      return (
        <a data-fslightbox={gallery} href={path} class="hidden">
          <Image
            src={allImages[path]()}
            alt={altText}
            class="rounded-lg mb-4"
          />
        </a>
      );
    })
  }
  <p class="text-xl font-bold">{name}</p>
  <p>Afmetingen: {width}m x {length}m</p>
  <p>Huurprijs: &euro; {price} per dag</p>
  <p>{extra}</p>
</div>
